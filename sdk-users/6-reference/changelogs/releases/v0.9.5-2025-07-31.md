# Kailash SDK v0.9.5 Release Notes
*Released: July 31, 2025*

## Overview

Version 0.9.5 is a **testing and documentation stability release** focused on ensuring the PythonCodeNode serialization fix remains stable through comprehensive regression testing. This release adds 45 new tests specifically targeting serialization edge cases and multi-channel consistency.

## üß™ Major Testing Enhancements (TODO-129)

### Comprehensive PythonCodeNode Serialization Test Suite
- **45 new tests** added across all testing tiers to prevent serialization regressions
- **Target**: Validate serialization fix from commit 2fcf8591 (June 11, 2025) stays stable
- **Coverage**: Complete validation of JSON compatibility and output structure consistency

### Test Breakdown by Tier

#### Unit Tests (33 tests)
- **Serialization behavior validation**: 15 tests covering edge cases
- **JSON compatibility**: 8 tests ensuring proper JSON serialization/deserialization
- **Output structure consistency**: 10 tests validating "result" key wrapping

#### Integration Tests (6 tests)
- **Real infrastructure testing**: PostgreSQL, Redis, MongoDB integration
- **Allowed modules validation**: Ensuring only permitted modules are accessible
- **Cross-node serialization**: Multi-node workflow serialization consistency

#### E2E Tests (6 tests)
- **Complete business workflows**: End-to-end serialization through complex pipelines
- **Multi-channel consistency**: API, CLI, and MCP serialization uniformity
- **Production scenario validation**: Real-world workflow serialization patterns

## üìö Documentation Improvements

### PythonCodeNode Output Structure Clarification
- **Updated documentation** to clearly specify all outputs are wrapped in "result" key
- **Enhanced examples** showing proper output structure expectations
- **Serialization consistency notes** for multi-channel deployment scenarios

### Testing Pattern Documentation
- **New patterns** for validating node serialization behavior
- **Best practices** for regression test development
- **Multi-channel testing** guidance for consistent behavior

## üõ°Ô∏è Stability & Quality Focus

### Regression Prevention
- **Zero functional changes** to core SDK - purely additive testing and documentation
- **Comprehensive coverage** of serialization edge cases identified during TODO-129 analysis
- **Multi-environment validation** ensuring consistency across deployment scenarios

### Quality Assurance
- **100% backward compatibility** maintained
- **No breaking changes** introduced
- **Enhanced reliability** through comprehensive test coverage

## üì¶ Package Updates

### Core SDK
- **kailash: 0.9.4 ‚Üí 0.9.5**
- Added comprehensive PythonCodeNode serialization test suite
- Enhanced documentation for output structure consistency

### DataFlow
- **kailash-dataflow: 0.3.3 ‚Üí 0.3.4**
- Updated to depend on Kailash SDK ‚â•0.9.5
- Maintains full compatibility with enhanced serialization testing

### Nexus
- **kailash-nexus: 1.0.3 ‚Üí 1.0.4**
- Updated to depend on Kailash SDK ‚â•0.9.5
- Benefits from improved multi-channel serialization consistency

## üîç Technical Details

### Serialization Testing Strategy
```python
# Example of new serialization validation patterns
def test_pythoncode_serialization_consistency():
    """Validate PythonCodeNode output structure consistency."""
    workflow = WorkflowBuilder()
    workflow.add_node("PythonCodeNode", "python_node", {
        "code": "result = {'data': [1, 2, 3]}",
        "allowed_modules": ["json", "math"]
    })

    runtime = LocalRuntime()
    results, run_id = runtime.execute(workflow.build())

    # Validate result structure
    assert "python_node" in results
    assert "result" in results["python_node"]
    assert results["python_node"]["result"]["data"] == [1, 2, 3]
```

### Multi-Channel Consistency Validation
- **API testing**: REST endpoint serialization consistency
- **CLI testing**: Command-line output structure validation
- **MCP testing**: Tool response serialization verification

## üöÄ Installation & Upgrade

### Fresh Installation
```bash
pip install kailash==0.9.5
pip install kailash-dataflow==0.3.4
pip install kailash-nexus==1.0.4
```

### Upgrade from v0.9.4
```bash
pip install --upgrade kailash kailash-dataflow kailash-nexus
```

### Verification
```python
import kailash
print(kailash.__version__)  # Should show: 0.9.5
```

## üîó Related Issues & PRs

- **TODO-129**: PythonCodeNode Nexus serialization comprehensive testing
- **Commit 2fcf8591**: Original serialization fix (June 11, 2025)
- **PR #XXX**: Comprehensive regression test suite implementation

## ‚ö†Ô∏è Breaking Changes

**None** - This is a fully backward-compatible testing and documentation release.

## üîÑ Migration Guide

No migration required. This release is fully backward compatible with v0.9.4.

## üß™ Testing Validation

All 2,400+ existing tests continue to pass, plus 45 new serialization-specific tests:

```bash
# Run all tests
pytest

# Run new serialization tests specifically
pytest tests/ -k "serialization" -v

# Validate PythonCodeNode behavior
pytest tests/unit/test_todo128_validation.py -v
```

## üìà What's Next

- **v0.9.6**: Performance optimizations based on test insights
- **v1.0.0**: Production readiness milestone with complete stability validation
- **Visual Studio**: Studio UI integration with validated serialization patterns

## üôè Acknowledgments

This release ensures the stability of critical PythonCodeNode serialization functionality through comprehensive testing, maintaining the reliability users depend on while providing confidence for future development.

---

**Full Diff**: [v0.9.4...v0.9.5](https://github.com/integrum/kailash-python-sdk/compare/v0.9.4...v0.9.5)
**Issues**: Report issues at [GitHub Issues](https://github.com/integrum/kailash-python-sdk/issues)
